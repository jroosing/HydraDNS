basePath: /api/v1
definitions:
  github_com_jroosing_hydradns_internal_api_models.APIConfigResponse:
    properties:
      enabled:
        type: boolean
      host:
        type: string
      port:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.AddCNAMERequest:
    properties:
      alias:
        type: string
      target:
        type: string
    required:
    - alias
    - target
    type: object
  github_com_jroosing_hydradns_internal_api_models.AddHostRequest:
    properties:
      ips:
        items:
          type: string
        minItems: 1
        type: array
      name:
        type: string
    required:
    - ips
    - name
    type: object
  github_com_jroosing_hydradns_internal_api_models.Blocklist:
    properties:
      enabled:
        type: boolean
      format:
        type: string
      last_fetched:
        type: string
      name:
        type: string
      url:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.BlocklistsResponse:
    properties:
      blocklists:
        items:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.Blocklist'
        type: array
      count:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.CPUStats:
    properties:
      idle_percent:
        type: number
      num_cpu:
        type: integer
      used_percent:
        type: number
    type: object
  github_com_jroosing_hydradns_internal_api_models.ClusterConfigRequest:
    properties:
      mode:
        description: 'Mode is the cluster mode: "standalone", "primary", or "secondary".'
        enum:
        - standalone
        - primary
        - secondary
        type: string
      node_id:
        description: NodeID is a unique identifier for this node (auto-generated if
          empty).
        type: string
      primary_url:
        description: |-
          PrimaryURL is the URL of the primary node's API (required for secondary mode).
          Example: "http://primary.homelab.local:8080"
        type: string
      shared_secret:
        description: SharedSecret is used to authenticate sync requests between nodes.
        type: string
      sync_interval:
        description: |-
          SyncInterval is how often secondary nodes poll for config changes.
          Default: "30s". Example: "1m", "5m".
        type: string
      sync_timeout:
        description: |-
          SyncTimeout is the HTTP timeout for sync requests.
          Default: "10s".
        type: string
    required:
    - mode
    type: object
  github_com_jroosing_hydradns_internal_api_models.ClusterConfigResponse:
    properties:
      mode:
        type: string
      node_id:
        type: string
      primary_url:
        type: string
      sync_interval:
        type: string
      sync_timeout:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.ClusterStatusResponse:
    properties:
      config_version:
        description: ConfigVersion is the current local configuration version.
        type: integer
      error_count:
        description: ErrorCount is the total number of sync errors.
        type: integer
      last_sync_error:
        description: LastSyncError is the error message from the last sync attempt
          (if any).
        type: string
      last_sync_time:
        description: LastSyncTime is when the last successful sync occurred (only
          for secondary).
        type: string
      last_sync_version:
        description: LastSyncVersion is the config version from the last successful
          sync.
        type: integer
      mode:
        description: 'Mode is the cluster mode: "standalone", "primary", or "secondary".'
        type: string
      next_sync_time:
        description: NextSyncTime is when the next sync is scheduled (only for secondary).
        type: string
      node_id:
        description: NodeID is this node's unique identifier.
        type: string
      primary_url:
        description: PrimaryURL is the URL of the primary node (only for secondary
          mode).
        type: string
      sync_count:
        description: SyncCount is the total number of successful syncs.
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.ConfigResponse:
    properties:
      api:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.APIConfigResponse'
      cluster:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ClusterConfigResponse'
      custom_dns:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.CustomDNSConfig'
      filtering:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.FilteringConfig'
      logging:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.LoggingConfig'
      rate_limit:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.RateLimitConfig'
      server:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ServerConfigResponse'
      upstream:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.UpstreamConfig'
    type: object
  github_com_jroosing_hydradns_internal_api_models.CustomDNSCountsResponse:
    properties:
      cnames:
        type: integer
      hosts:
        type: integer
      total:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse:
    properties:
      data: {}
      message:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.CustomDNSRecordsResponse:
    properties:
      cnames:
        additionalProperties:
          type: string
        type: object
      count:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSCountsResponse'
      hosts:
        additionalProperties:
          items:
            type: string
          type: array
        type: object
    type: object
  github_com_jroosing_hydradns_internal_api_models.DNSStatsResponse:
    properties:
      avg_latency_ms:
        type: number
      queries_tcp:
        type: integer
      queries_total:
        type: integer
      queries_udp:
        type: integer
      responses_error:
        type: integer
      responses_nxdomain:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.DomainDeleteRequest:
    properties:
      domains:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - domains
    type: object
  github_com_jroosing_hydradns_internal_api_models.DomainListResponse:
    properties:
      count:
        type: integer
      domains:
        items:
          type: string
        type: array
    type: object
  github_com_jroosing_hydradns_internal_api_models.DomainRequest:
    properties:
      domains:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - domains
    type: object
  github_com_jroosing_hydradns_internal_api_models.ErrorResponse:
    properties:
      error:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.FilteringEnabledRequest:
    properties:
      enabled:
        type: boolean
    type: object
  github_com_jroosing_hydradns_internal_api_models.FilteringStatsResponse:
    properties:
      blacklist_size:
        type: integer
      enabled:
        type: boolean
      queries_allowed:
        type: integer
      queries_blocked:
        type: integer
      queries_total:
        type: integer
      whitelist_size:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.MemoryStats:
    properties:
      free_mb:
        type: number
      total_mb:
        type: number
      used_mb:
        type: number
      used_percent:
        type: number
    type: object
  github_com_jroosing_hydradns_internal_api_models.ServerConfigResponse:
    properties:
      enable_tcp:
        type: boolean
      host:
        type: string
      max_concurrency:
        type: integer
      port:
        type: integer
      tcp_fallback:
        type: boolean
      upstream_socket_pool_size:
        type: integer
      workers:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.ServerStatsResponse:
    properties:
      cpu:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CPUStats'
      dns:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DNSStatsResponse'
      filtering:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.FilteringStatsResponse'
      memory:
        $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.MemoryStats'
      start_time:
        type: string
      uptime:
        type: string
      uptime_seconds:
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_api_models.SetClusterConfigResponse:
    properties:
      message:
        description: Message provides additional information about the configuration
          change.
        type: string
      mode:
        description: Mode is the new cluster mode.
        type: string
      node_id:
        description: NodeID is this node's identifier.
        type: string
      requires_restart:
        description: RequiresRestart indicates if a restart is needed for changes
          to take effect.
        type: boolean
      status:
        description: Status indicates the result of the operation.
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.StatusResponse:
    properties:
      status:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_api_models.UpdateCNAMERequest:
    properties:
      target:
        type: string
    required:
    - target
    type: object
  github_com_jroosing_hydradns_internal_api_models.UpdateHostRequest:
    properties:
      ips:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - ips
    type: object
  github_com_jroosing_hydradns_internal_cluster.ExportData:
    properties:
      custom_dns:
        allOf:
        - $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.CustomDNSConfig'
        description: CustomDNS contains custom DNS records (hosts and CNAMEs).
      filtering:
        allOf:
        - $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.FilteringConfig'
        description: Filtering contains domain filtering configuration.
      node_id:
        description: NodeID is the primary node's identifier.
        type: string
      timestamp:
        description: Timestamp is when this export was generated.
        type: string
      upstream:
        allOf:
        - $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.UpstreamConfig'
        description: Upstream contains upstream DNS server configuration.
      version:
        description: Version is the configuration version from the primary node.
        type: integer
    type: object
  github_com_jroosing_hydradns_internal_config.BlocklistConfig:
    properties:
      format:
        description: '"auto", "adblock", "hosts", "domains"'
        type: string
      name:
        type: string
      url:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_config.CustomDNSConfig:
    properties:
      cnames:
        additionalProperties:
          type: string
        description: |-
          CNAMEs maps alias names to canonical names
          Example: "www.homelab.local": "homelab.local"
        type: object
      hosts:
        additionalProperties:
          items:
            type: string
          type: array
        description: |-
          Hosts maps domain names to IP addresses (IPv4 or IPv6)
          Example: "homelab.local": "192.168.1.10" or "server.local": "2001:db8::1"
        type: object
    type: object
  github_com_jroosing_hydradns_internal_config.FilteringConfig:
    properties:
      blacklist_domains:
        items:
          type: string
        type: array
      blocklists:
        items:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_config.BlocklistConfig'
        type: array
      enabled:
        type: boolean
      log_allowed:
        type: boolean
      log_blocked:
        type: boolean
      refresh_interval:
        type: string
      whitelist_domains:
        items:
          type: string
        type: array
    type: object
  github_com_jroosing_hydradns_internal_config.LoggingConfig:
    properties:
      extra_fields:
        additionalProperties:
          type: string
        type: object
      include_pid:
        type: boolean
      level:
        type: string
      structured:
        type: boolean
      structured_format:
        type: string
    type: object
  github_com_jroosing_hydradns_internal_config.RateLimitConfig:
    properties:
      cleanup_seconds:
        description: 'CleanupSeconds is how often stale entries are cleaned up (default:
          60)'
        type: number
      global_burst:
        description: 'GlobalBurst is the global burst size (default: 100000)'
        type: integer
      global_qps:
        description: 'GlobalQPS is the server-wide queries per second limit (default:
          100000, 0 = disabled)'
        type: number
      ip_burst:
        description: 'IPBurst is the per-IP burst size (default: 6000)'
        type: integer
      ip_qps:
        description: 'IPQPS is the per-IP QPS limit (default: 3000, 0 = disabled)'
        type: number
      max_ip_entries:
        description: 'MaxIPEntries is the maximum number of tracked IPs (default:
          65536)'
        type: integer
      max_prefix_entries:
        description: 'MaxPrefixEntries is the maximum number of tracked prefixes (default:
          16384)'
        type: integer
      prefix_burst:
        description: 'PrefixBurst is the per-prefix burst size (default: 20000)'
        type: integer
      prefix_qps:
        description: 'PrefixQPS is the per-prefix QPS limit (default: 10000, 0 = disabled)'
        type: number
    type: object
  github_com_jroosing_hydradns_internal_config.UpstreamConfig:
    properties:
      max_retries:
        description: Max retries per upstream on timeout
        type: integer
      servers:
        items:
          type: string
        type: array
      tcp_timeout:
        description: Timeout for TCP queries (e.g., "5s")
        type: string
      udp_timeout:
        description: Timeout for UDP queries (e.g., "3s")
        type: string
    type: object
host: localhost:8080
info:
  contact:
    name: HydraDNS Support
    url: https://github.com/jroosing/hydradns
  description: REST API for managing HydraDNS server configuration and filtering.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: HydraDNS Management API
  version: "1.0"
paths:
  /cluster/config:
    get:
      description: Returns the current cluster configuration (secrets redacted)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ClusterConfigRequest'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get cluster configuration
      tags:
      - cluster
    put:
      consumes:
      - application/json
      description: Sets the cluster mode and configuration for this node
      parameters:
      - description: Cluster configuration
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ClusterConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.SetClusterConfigResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Configure cluster settings
      tags:
      - cluster
  /cluster/export:
    get:
      description: Returns configuration data for secondary nodes to import (primary
        only)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_cluster.ExportData'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      summary: Export configuration for cluster sync
      tags:
      - cluster
  /cluster/status:
    get:
      description: Returns the current cluster mode and synchronization status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ClusterStatusResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get cluster status
      tags:
      - cluster
  /cluster/sync:
    post:
      description: Triggers an immediate configuration sync from the primary node
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Force immediate sync (secondary only)
      tags:
      - cluster
  /config:
    get:
      description: Returns the current server configuration (sensitive fields redacted)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ConfigResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get current configuration
      tags:
      - config
    put:
      consumes:
      - application/json
      description: Updates server configuration (requires restart for some settings)
      parameters:
      - description: Configuration update
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ConfigResponse'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "501":
          description: Not Implemented
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update configuration
      tags:
      - config
  /config/reload:
    post:
      description: Triggers a hot reload of configuration from disk
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Reload configuration
      tags:
      - config
  /custom-dns:
    get:
      description: Returns all configured custom DNS host and CNAME records
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSRecordsResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: List all custom DNS records
      tags:
      - custom-dns
  /custom-dns/cnames:
    post:
      consumes:
      - application/json
      description: Adds a new custom DNS CNAME record
      parameters:
      - description: CNAME record to add
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.AddCNAMERequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "409":
          description: CNAME already exists
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Add a CNAME record
      tags:
      - custom-dns
  /custom-dns/cnames/{alias}:
    delete:
      description: Removes a custom DNS CNAME record
      parameters:
      - description: CNAME alias
        in: path
        name: alias
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Delete a CNAME record
      tags:
      - custom-dns
    put:
      consumes:
      - application/json
      description: Updates the target for an existing custom DNS CNAME
      parameters:
      - description: CNAME alias
        in: path
        name: alias
        required: true
        type: string
      - description: Updated target
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.UpdateCNAMERequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update a CNAME record
      tags:
      - custom-dns
  /custom-dns/hosts:
    post:
      consumes:
      - application/json
      description: Adds a new custom DNS host record (A/AAAA)
      parameters:
      - description: Host record to add
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.AddHostRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "409":
          description: Host already exists
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Add a host record
      tags:
      - custom-dns
  /custom-dns/hosts/{name}:
    delete:
      description: Removes a custom DNS host record
      parameters:
      - description: Host name
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Delete a host record
      tags:
      - custom-dns
    put:
      consumes:
      - application/json
      description: Updates the IP addresses for an existing custom DNS host
      parameters:
      - description: Host name
        in: path
        name: name
        required: true
        type: string
      - description: Updated IP addresses
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.UpdateHostRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.CustomDNSOperationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update a host record
      tags:
      - custom-dns
  /filtering/blacklist:
    delete:
      consumes:
      - application/json
      description: Removes one or more domains from the blacklist
      parameters:
      - description: Domains to remove
        in: body
        name: domains
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainDeleteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "501":
          description: Not Implemented
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Remove domains from blacklist
      tags:
      - filtering
    get:
      description: Returns all domains in the blacklist
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainListResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get blacklist domains
      tags:
      - filtering
    post:
      consumes:
      - application/json
      description: Adds one or more domains to the blacklist
      parameters:
      - description: Domains to add
        in: body
        name: domains
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Add domains to blacklist
      tags:
      - filtering
  /filtering/blocklists:
    get:
      description: Returns all configured blocklists
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.BlocklistsResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get blocklists
      tags:
      - filtering
  /filtering/blocklists/{name}/enabled:
    put:
      consumes:
      - application/json
      description: Toggles a specific blocklist on or off (takes effect after restart
        until hot-reload is implemented)
      parameters:
      - description: Blocklist name
        in: path
        name: name
        required: true
        type: string
      - description: Enable state
        in: body
        name: enabled
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.FilteringEnabledRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Enable or disable a blocklist
      tags:
      - filtering
  /filtering/blocklists/{name}/refresh:
    post:
      description: Marks a blocklist as refreshed (updates last_fetched); engine reload
        pending future hot-reload
      parameters:
      - description: Blocklist name
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Refresh a blocklist
      tags:
      - filtering
  /filtering/enabled:
    put:
      consumes:
      - application/json
      description: Toggles the filtering engine on or off
      parameters:
      - description: Enable state
        in: body
        name: enabled
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.FilteringEnabledRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Enable or disable filtering
      tags:
      - filtering
  /filtering/stats:
    get:
      description: Returns detailed filtering statistics
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.FilteringStatsResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get filtering statistics
      tags:
      - filtering
  /filtering/whitelist:
    delete:
      consumes:
      - application/json
      description: Removes one or more domains from the whitelist
      parameters:
      - description: Domains to remove
        in: body
        name: domains
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainDeleteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "501":
          description: Not Implemented
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Remove domains from whitelist
      tags:
      - filtering
    get:
      description: Returns all domains in the whitelist
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainListResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get whitelist domains
      tags:
      - filtering
    post:
      consumes:
      - application/json
      description: Adds one or more domains to the whitelist
      parameters:
      - description: Domains to add
        in: body
        name: domains
        required: true
        schema:
          $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.DomainRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Add domains to whitelist
      tags:
      - filtering
  /health:
    get:
      description: Returns server health status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.StatusResponse'
      summary: Health check
      tags:
      - system
  /stats:
    get:
      description: Returns runtime statistics including system CPU usage, memory usage,
        and DNS metrics
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_jroosing_hydradns_internal_api_models.ServerStatsResponse'
      security:
      - ApiKeyAuth: []
      summary: Server statistics
      tags:
      - system
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
